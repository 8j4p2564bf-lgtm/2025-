<!DOCTYPE html>
<html lang="zh-TW" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>äº¬éƒ½ãƒ»å¤§é˜ª 5å¤©4å¤œè‡ªç”±è¡Œ</title>

    <!-- 1. å¼•å…¥ Tailwind CSS (æ¨£å¼åº«) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        navy: {
                            950: '#020C1B',
                            900: '#0A192F', // ä¸»èƒŒæ™¯
                            800: '#112240', // å¡ç‰‡èƒŒæ™¯
                            700: '#233554', // é‚Šæ¡†/æ‡¸åœ
                            600: '#303C55',
                        },
                        accent: {
                            teal: '#64FFDA', // äº®é’è‰² (å¼·èª¿)
                            rose: '#F43F5E', // é‡é»/è­¦å‘Š
                            gold: '#FBBF24', // å¤©æ°£/æ˜Ÿè™Ÿ
                            blue: '#60A5FA', // é€£çµ
                        },
                        text: {
                            light: '#E6F1FF', // æœ€äº®ç™½
                            main: '#8892B0',  // ä¸»è¦ç°
                            muted: '#4F5B78', // æš—æ·¡ç°
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'sans-serif'],
                    },
                    boxShadow: {
                        'neon': '0 0 10px rgba(100, 255, 218, 0.1)',
                        'card': '0 10px 30px -15px rgba(2, 12, 27, 0.7)',
                    }
                }
            }
        }
    </script>

    <!-- 2. å¼•å…¥ React & Babel (æ ¸å¿ƒé‹ä½œåº«) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- 3. è‡ªå®šç¾©æ¨£å¼ -->
    <style>
        body {
            background-color: #0A192F;
            color: #8892B0;
            -webkit-tap-highlight-color: transparent;
            overscroll-behavior-y: none;
        }
        /* éš±è—æ²è»¸ä½†ä¿ç•™åŠŸèƒ½ */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* å‹•ç•« */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }
        
        /* æ¯›ç»ç’ƒ */
        .glass-panel {
            background: rgba(10, 25, 47, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(100, 255, 218, 0.1);
        }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.554.0"
  }
}
</script>
</head>
<body>
    <div id="root"></div>

    <!-- 4. React æ‡‰ç”¨ç¨‹å¼é‚è¼¯ -->
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- 1. åœ–ç¤ºçµ„ä»¶ (SVG) ---
        const Icons = {
            Plane: ({ className }) => <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 2L11 13"/><path d="M22 2l-7 20-4-9-9-4 20-7z"/></svg>,
            MapPin: ({ className }) => <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>,
            Clock: ({ className }) => <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
            X: ({ className }) => <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>,
            Bed: ({ className }) => <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 4v16"/><path d="M2 8h18a2 2 0 0 1 2 2v10"/><path d="M2 17h20"/><path d="M6 8v9"/></svg>,
            Utensils: ({ className }) => <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/></svg>,
            ShoppingBag: ({ className }) => <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>,
            Train: ({ className }) => <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/><path d="M2 8h20"/></svg>,
            Sun: ({ className }) => <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>,
            Cloud: ({ className }) => <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/></svg>,
            Camera: ({ className }) => <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg>,
            Calculator: ({ className }) => <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="4" y="2" width="16" height="20" rx="2"/><line x1="8" y1="6" x2="16" y2="6"/><line x1="16" y1="14" x2="16" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></svg>,
            ChevronDown: ({ className }) => <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="6 9 12 15 18 9"/></svg>,
            Info: ({ className }) => <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
        };

        // --- 2. è¡Œç¨‹è³‡æ–™ (DATA) ---
        const TRIP_DATA = [
            {
                day: 1,
                date: '10/16 (å››)',
                title: 'äº¬éƒ½åˆå°è±¡ï¼šåµå±±ï¼‹æœˆç‡ˆè·¯',
                weather: { type: 'sun', text: '16Â°C - 24Â°C' },
                activities: [
                    { time: '05:30', title: 'å‰å¾€æ¡ƒåœ’æ©Ÿå ´', desc: 'ç«¹åŒ— >> æ¡ƒæ©Ÿ2èˆªå»ˆã€‚é ç®—ç¾é‡‘1500ã€‚', type: 'transport' },
                    { time: '09:00', title: 'é£›å¾€æ—¥æœ¬ (CI0152)', desc: 'ä¸­è¯èˆªç©º TPE 09:00 >> KIX 12:50', type: 'flight' },
                    { time: '13:00', title: 'æŠµé”é—œè¥¿æ©Ÿå ´', desc: 'å…¥å¢ƒæ‰‹çºŒã€é ˜å–è¡Œæã€‚', type: 'other' },
                    { time: '14:00', title: 'æ­ JR Haruka â†’ äº¬éƒ½', desc: 'å‰å¾€äº¬éƒ½è»Šç«™ï¼ŒHello Kitty åˆ—è»Šã€‚', type: 'transport' },
                    { time: '15:30', title: 'Check-in', desc: 'Hotel The Mâ€™s Kyoto å…¥ä½ã€‚', type: 'hotel', location: "Hotel The M's Kyoto" },
                    { time: '16:10', title: 'åµå±±æ¸¡æœˆæ©‹ã€ç«¹æ—å°å¾‘', desc: 'äº¬éƒ½å¿…å»ã€‚èµ°éæ¸¡æœˆæ©‹ï¼Œç©¿æ¢­ç«¹æ—å°å¾‘ã€‚', type: 'attraction', location: 'Arashiyama Bamboo Grove', price: 'å…è²»' },
                    { time: '18:00', title: 'åµå±±æœˆç‡ˆè·¯', desc: 'ç§‹å­£é™å®šå¤œé–“é»ç‡ˆæ´»å‹•ã€‚', type: 'attraction', location: 'Arashiyama Park' },
                    { time: '19:30', title: 'æ™šé¤ / ä¼‘æ¯', desc: 'æ™šé¤æˆ–å›é£¯åº—ä¼‘æ¯ã€‚', type: 'food' }
                ]
            },
            {
                day: 2,
                date: '10/17 (äº”)',
                title: 'å¤éƒ½é¢¨æƒ…ï¼šæ¸…æ°´å¯ºï¼‹å…«å‚ç¥ç¤¾',
                weather: { type: 'cloud', text: '15Â°C - 23Â°C' },
                activities: [
                    { time: '08:30', title: 'å‡ºç™¼', desc: 'å¸‚å·´å£« >> äº”æ¡å‚ã€‚', type: 'transport' },
                    { time: '09:30', title: 'æ¸…æ°´å¯ºï¼‹ä¸‰å¹´å‚', desc: 'åƒè§€æ¸…æ°´å¯ºï¼Œæ•£æ­¥å¤è¡—ã€‚', type: 'attraction', location: 'Kiyomizu-dera', price: 'é–€ç¥¨ Â¥500' },
                    { time: '11:40', title: 'å…«å‚ç¥ç¤¾ï¼†èŠ±è¦‹å°è·¯', desc: 'åƒæ‹œç¥ç¤¾ï¼Œé«”é©—ç¥‡åœ’é¢¨æƒ…ã€‚', type: 'attraction', location: 'Yasaka Shrine' },
                    { time: '13:25', title: 'éŒ¦å¸‚å ´åˆé¤', desc: 'äº¬éƒ½çš„å»šæˆ¿ï¼Œå„ç¨®å°åƒã€‚', type: 'food', location: 'Nishiki Market' },
                    { time: '15:00', title: 'å››æ¡æ²³åŸç”º / å¹³å®‰ç¥å®®', desc: 'è‡ªç”±æ´»å‹•æˆ–å»å¹³å®‰ç¥å®®ã€‚', type: 'shopping', location: 'Heian Shrine' },
                    { time: '18:30', title: 'æ™šé¤ï¼šå£½å–œç‡’', desc: 'å£½å–œç‡’ä¸‰æ¢æ²³åŸç”ºåº—ã€‚', type: 'food', location: 'Sukiyaki Sanjo Kawaramachi' },
                    { time: 'å‚æ™š', title: 'å›é£¯åº—ä¼‘æ¯', desc: 'Hotel The Mâ€™s Kyoto', type: 'hotel' }
                ]
            },
            {
                day: 3,
                date: '10/18 (å…­)',
                title: 'ç§»å‹•æ—¥ï¼šä¼è¦‹ç¨»è·ï¼‹å¤§é˜ª',
                weather: { type: 'cloud', text: '16Â°C - 22Â°C' },
                activities: [
                    { time: '08:30', title: 'ä¼è¦‹ç¨»è·å¤§ç¤¾', desc: 'åƒæœ¬é³¥å±…åƒæ‹œã€‚', type: 'attraction', location: 'Fushimi Inari Taisha' },
                    { time: '11:00', title: 'åˆé¤ & å–è¡Œæ', desc: 'å›é£¯åº—æ‹¿è¡Œæã€‚', type: 'food' },
                    { time: '14:20', title: 'JR æ–°å¿«é€Ÿ â†’ å¤§é˜ª', desc: 'ç§»å‹•è‡³å¤§é˜ªã€‚', type: 'transport' },
                    { time: '15:30', title: 'æ¢…ç”° HEP FIVE', desc: 'ç´…è‰²æ‘©å¤©è¼ª (ç¶­ä¿®ä¸­?)ã€‚', type: 'attraction', location: 'HEP FIVE Ferris Wheel' },
                    { time: '17:00', title: 'å¤§é˜ªé£¯åº— Check-in', desc: 'The Bridge Hotel å¿ƒé½‹æ©‹ã€‚', type: 'hotel', location: 'The Bridge Hotel Shinsaibashi' },
                    { time: '18:30', title: 'é“é “å € & å¿ƒé½‹æ©‹', desc: 'è·‘è·‘äººã€é€›è¡—ã€ç« é­šç‡’ã€‚', type: 'shopping', location: 'Dotonbori' }
                ]
            },
            {
                day: 4,
                date: '10/19 (æ—¥)',
                title: 'å¤§é˜ªæ·±åº¦ï¼šå¤§é˜ªåŸï¼‹é»‘é–€å¸‚å ´',
                weather: { type: 'sun', text: '17Â°C - 24Â°C' },
                activities: [
                    { time: '08:30', title: 'åœ°éµ â†’ å¤§é˜ªå•†å‹™åœ’å€', desc: 'å‰å¾€å¤§é˜ªåŸã€‚', type: 'transport' },
                    { time: '09:00', title: 'å¤§é˜ªåŸå…¬åœ’', desc: 'å¤©å®ˆé–£ã€å¾¡åº§èˆ¹ã€æµ·æ´‹å ‚åšç‰©é¤¨ã€‚', type: 'attraction', location: 'Osaka Castle', price: 'å‘¨éŠå·' },
                    { time: '12:00', title: 'å¤§é˜ªå¤©æ»¿å®®', desc: 'å­¸å•ä¹‹ç¥ã€‚', type: 'attraction', location: 'ÅŒsaka TemmangÅ«' },
                    { time: '12:30', title: 'å¤©ç¥æ©‹ç­‹å•†åº—è¡—', desc: 'æ—¥æœ¬æœ€é•·å•†åº—è¡—åˆé¤ã€‚', type: 'food', location: 'Tenjinbashisuji Shopping Street' },
                    { time: '13:30', title: 'å¤§é˜ªç”Ÿæ´»ä»Šæ˜”é¤¨', desc: 'æ±Ÿæˆ¶æ™‚ä»£è¡—æ™¯é«”é©—ã€‚', type: 'attraction', location: 'Osaka Museum of Housing and Living' },
                    { time: '15:30', title: 'é»‘é–€å¸‚å ´', desc: 'æµ·é®®ã€å’Œç‰›ã€æ°´æœå¤§ç¦ã€‚', type: 'food', location: 'Kuromon Ichiba Market' },
                    { time: '17:00', title: 'é“é “å €é€›è¡—', desc: 'è‡ªç”±è³¼ç‰©ã€‚', type: 'shopping' },
                    { time: '20:00', title: 'ç‡’è‚‰æ™šé¤', desc: 'ç‡’è‚‰åŠ›ä¸¸ é›£æ³¢é“é “å €åº—ã€‚', type: 'food', location: 'Rikimaru Namba Dotonbori' }
                ]
            },
            {
                day: 5,
                date: '10/20 (ä¸€)',
                title: 'å¤§é³¥å¤§ç¤¾ï¼‹è¿”å°',
                weather: { type: 'sun', text: '16Â°C - 23Â°C' },
                activities: [
                    { time: '08:30', title: 'å‰å¾€é³³ç«™', desc: 'å¤©ç‹å¯ºè½‰ JR è‡³é³³ç«™ã€‚', type: 'transport' },
                    { time: '09:20', title: 'å¤§é³¥å¤§ç¤¾', desc: 'åƒæ‹œã€‚', type: 'attraction', location: 'Otori Taisha' },
                    { time: '10:00', title: 'å‰å¾€æ©Ÿå ´', desc: 'JR æˆ–å—æµ·é›»éµ â†’ é—œè¥¿æ©Ÿå ´ã€‚', type: 'transport' },
                    { time: '11:00', title: 'æ©Ÿå ´å ±åˆ°', desc: 'å ±åˆ°ã€é€€ç¨…ã€æœ€å¾Œæ¡è²·ã€‚', type: 'other', location: 'Kansai International Airport' },
                    { time: '14:00', title: 'æ­æ©Ÿè¿”å° (CI0153)', desc: 'ä¸­è¯èˆªç©º KIX 14:00 >> TPE 15:55', type: 'flight' }
                ]
            }
        ];

        // --- 3. å¯¦ç”¨å·¥å…·çµ„ä»¶ ---

        // å½ˆå‡ºè¦–çª—
        const Modal = ({ isOpen, onClose, data }) => {
            if (!isOpen || !data) return null;

            // æ ¹æ“šé¡å‹è¨­å®šé¡è‰²
            const getTypeColor = (t) => {
                if (t === 'flight') return 'text-blue-400 border-blue-400';
                if (t === 'attraction') return 'text-accent-rose border-accent-rose';
                if (t === 'food') return 'text-accent-gold border-accent-gold';
                return 'text-accent-teal border-accent-teal';
            };

            const mapUrl = data.location ? `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(data.location)}` : null;

            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
                    <div className="absolute inset-0 bg-navy-950/90 backdrop-blur-sm" onClick={onClose}></div>
                    <div className="relative w-full max-w-sm bg-navy-800 rounded-2xl shadow-2xl border border-navy-700 p-6 animate-fade-in">
                        <button onClick={onClose} className="absolute top-4 right-4 text-text-muted hover:text-white">
                            <Icons.X className="w-6 h-6" />
                        </button>
                        
                        <div className={`inline-block px-3 py-1 rounded-full text-xs font-bold border mb-4 ${getTypeColor(data.type)} bg-opacity-10`}>
                            {data.time}
                        </div>
                        
                        <h2 className="text-2xl font-bold text-text-light mb-4 leading-tight">{data.title}</h2>
                        
                        <div className="space-y-4">
                            <p className="text-text-main text-sm leading-relaxed border-l-2 border-navy-600 pl-3">
                                {data.desc}
                            </p>
                            
                            {data.price && (
                                <div className="flex items-center gap-2 text-accent-gold text-sm font-bold bg-navy-900/50 p-3 rounded-lg">
                                    <span>ğŸ’°</span> è²»ç”¨: {data.price}
                                </div>
                            )}

                            {mapUrl ? (
                                <a href={mapUrl} target="_blank" className="flex items-center justify-center w-full gap-2 bg-accent-teal text-navy-900 font-bold py-3 rounded-xl mt-4 hover:bg-teal-300 transition-colors shadow-[0_0_15px_rgba(100,255,218,0.4)]">
                                    <Icons.MapPin className="w-5 h-5" /> é–‹å•Ÿ Google Maps
                                </a>
                            ) : (
                                <button onClick={onClose} className="w-full py-3 rounded-xl bg-navy-700 text-text-light font-bold mt-4">
                                    é—œé–‰
                                </button>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        // å¤©æ°£å°å·¥å…·
        const WeatherWidget = ({ weather }) => {
            const isSun = weather.type === 'sun';
            return (
                <div className="flex items-center justify-between bg-navy-800/50 border border-navy-700 rounded-xl p-3 mb-4">
                    <div className="flex items-center gap-3">
                        <div className={`p-2 rounded-full ${isSun ? 'bg-orange-500/20 text-orange-400' : 'bg-blue-500/20 text-blue-400'}`}>
                            {isSun ? <Icons.Sun className="w-5 h-5" /> : <Icons.Cloud className="w-5 h-5" />}
                        </div>
                        <div>
                            <div className="text-[10px] text-text-muted font-bold uppercase tracking-wider">Forecast</div>
                            <div className="text-sm font-bold text-text-light">{weather.text}</div>
                        </div>
                    </div>
                </div>
            );
        };

        // åŒ¯ç‡è¨ˆç®—æ©Ÿ
        const ToolsDrawer = ({ isOpen, onClose }) => {
            if (!isOpen) return null;
            const [jpy, setJpy] = useState('');
            const rate = 0.22;

            return (
                <div className="fixed inset-0 z-[60] flex items-end justify-center sm:items-center">
                    <div className="absolute inset-0 bg-navy-950/80 backdrop-blur-sm" onClick={onClose}></div>
                    <div className="relative w-full max-w-md bg-navy-800 border-t border-navy-700 sm:rounded-2xl rounded-t-2xl p-6 animate-fade-in shadow-2xl">
                        <div className="flex justify-between items-center mb-6">
                            <h3 className="text-lg font-bold text-text-light flex items-center gap-2">
                                <Icons.Calculator className="text-accent-teal w-5 h-5" /> åŒ¯ç‡è©¦ç®—
                            </h3>
                            <button onClick={onClose}><Icons.X className="text-text-muted w-6 h-6" /></button>
                        </div>
                        
                        <div className="bg-navy-900 p-4 rounded-xl border border-navy-700 space-y-4">
                            <div className="flex gap-4 items-center">
                                <input 
                                    type="number" 
                                    placeholder="JPY" 
                                    value={jpy}
                                    onChange={e => setJpy(e.target.value)}
                                    className="w-full bg-navy-800 text-white p-3 rounded-lg text-center font-mono text-lg outline-none focus:ring-2 focus:ring-accent-teal"
                                />
                                <span className="text-text-muted">=</span>
                                <div className="w-full bg-navy-800/50 text-accent-teal p-3 rounded-lg text-center font-mono text-lg font-bold">
                                    {jpy ? Math.round(jpy * rate) : 0} <span className="text-xs">TWD</span>
                                </div>
                            </div>
                            <div className="text-center text-xs text-text-muted">åŒ¯ç‡ç´„ 0.22</div>
                        </div>

                        <div className="grid grid-cols-2 gap-3 mt-4">
                             <a href="https://translate.google.com/" target="_blank" className="p-3 bg-navy-700 rounded-lg text-center text-sm font-bold text-text-light hover:bg-navy-600">Google ç¿»è­¯</a>
                             <a href="https://www.google.com/maps" target="_blank" className="p-3 bg-navy-700 rounded-lg text-center text-sm font-bold text-text-light hover:bg-navy-600">Google åœ°åœ–</a>
                        </div>
                    </div>
                </div>
            );
        };

        // è³‡è¨Šæ”¶åˆå€å¡Š (èˆªç­/é£¯åº—)
        const InfoAccordion = () => {
            const [isOpen, setIsOpen] = useState(false);
            return (
                <div className="bg-navy-800 rounded-xl border border-navy-700 overflow-hidden mb-6 shadow-card">
                    <button onClick={() => setIsOpen(!isOpen)} className="w-full flex items-center justify-between p-4 bg-navy-800 hover:bg-navy-700 transition-colors">
                        <div className="flex items-center gap-3">
                            <div className="bg-navy-700 p-2 rounded-lg text-accent-blue"><Icons.Plane className="w-5 h-5" /></div>
                            <span className="font-bold text-text-light">èˆªç­èˆ‡é£¯åº—è³‡è¨Š</span>
                        </div>
                        <Icons.ChevronDown className={`w-5 h-5 text-text-muted transition-transform ${isOpen ? 'rotate-180' : ''}`} />
                    </button>
                    {isOpen && (
                        <div className="p-4 bg-navy-900/50 border-t border-navy-700 space-y-4 text-sm">
                            <div>
                                <h4 className="text-accent-teal font-bold mb-1">å»ç¨‹ 10/16 (CI0152)</h4>
                                <p className="text-text-main">09:00 TPE æ¡ƒåœ’ <span className="text-text-muted">â†’</span> 12:50 KIX é—œè¥¿</p>
                            </div>
                            <div>
                                <h4 className="text-accent-teal font-bold mb-1">å›ç¨‹ 10/20 (CI0153)</h4>
                                <p className="text-text-main">14:00 KIX é—œè¥¿ <span className="text-text-muted">â†’</span> 15:55 TPE æ¡ƒåœ’</p>
                            </div>
                            <div className="pt-2 border-t border-navy-700">
                                <div className="mb-2">
                                    <span className="text-xs bg-navy-700 px-1.5 py-0.5 rounded text-white mr-2">äº¬éƒ½</span>
                                    <span className="text-text-light">Hotel The Mâ€™s Kyoto</span>
                                </div>
                                <div>
                                    <span className="text-xs bg-navy-700 px-1.5 py-0.5 rounded text-white mr-2">å¤§é˜ª</span>
                                    <span className="text-text-light">The Bridge Hotel Shinsaibashi</span>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // --- 4. ä¸»ç¨‹å¼ (App) ---
        const App = () => {
            const [activeDay, setActiveDay] = useState(1);
            const [modalData, setModalData] = useState(null);
            const [showTools, setShowTools] = useState(false);

            const currentDayData = TRIP_DATA.find(d => d.day === activeDay);

            // æ ¹æ“šé¡å‹å–å¾—åœ–ç¤º
            const getIcon = (type) => {
                switch(type) {
                    case 'flight': return <Icons.Plane className="w-5 h-5" />;
                    case 'transport': return <Icons.Train className="w-5 h-5" />;
                    case 'food': return <Icons.Utensils className="w-5 h-5" />;
                    case 'shopping': return <Icons.ShoppingBag className="w-5 h-5" />;
                    case 'hotel': return <Icons.Bed className="w-5 h-5" />;
                    case 'attraction': return <Icons.Camera className="w-5 h-5" />;
                    default: return <Icons.MapPin className="w-5 h-5" />;
                }
            };

            // æ ¹æ“šé¡å‹å–å¾—é¡è‰²æ¨£å¼
            const getItemStyle = (type) => {
                switch(type) {
                    case 'flight': return 'text-blue-400 bg-blue-400/10 border-blue-400/20';
                    case 'transport': return 'text-indigo-400 bg-indigo-400/10 border-indigo-400/20';
                    case 'attraction': return 'text-accent-rose bg-accent-rose/10 border-accent-rose/20';
                    case 'food': return 'text-accent-gold bg-accent-gold/10 border-accent-gold/20';
                    default: return 'text-accent-teal bg-accent-teal/10 border-accent-teal/20';
                }
            };

            return (
                <div className="max-w-md mx-auto min-h-screen pb-10 relative">
                    {/* Header */}
                    <div className="sticky top-0 z-30 glass-panel pt-safe-top">
                        <div className="px-4 py-3 flex justify-between items-center">
                            <div>
                                <h1 className="text-xl font-bold text-text-light tracking-tight">Kyoto & Osaka</h1>
                                <p className="text-xs text-text-muted uppercase tracking-widest">Family Trip 2025</p>
                            </div>
                            <button onClick={() => setShowTools(true)} className="p-2 bg-navy-700 rounded-lg text-accent-teal hover:bg-navy-600 transition-colors">
                                <Icons.Calculator className="w-5 h-5" />
                            </button>
                        </div>

                        {/* Tabs */}
                        <div className="flex overflow-x-auto no-scrollbar px-2 pb-1 space-x-1">
                            {TRIP_DATA.map(d => (
                                <button
                                    key={d.day}
                                    onClick={() => setActiveDay(d.day)}
                                    className={`flex-1 min-w-[70px] py-2 rounded-t-lg transition-all relative ${
                                        activeDay === d.day ? 'bg-navy-800 text-accent-teal' : 'text-text-muted hover:text-text-main'
                                    }`}
                                >
                                    <div className="text-[10px] font-bold uppercase mb-0.5">Day {d.day}</div>
                                    <div className="text-sm font-bold">{d.date.split(' ')[0]}</div>
                                    {activeDay === d.day && <div className="absolute bottom-0 left-0 right-0 h-0.5 bg-accent-teal shadow-[0_0_10px_#64FFDA]"></div>}
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Main Content */}
                    <div className="px-4 pt-6 animate-fade-in" key={activeDay}>
                        
                        <div className="mb-4">
                            <span className="inline-block px-2 py-0.5 rounded text-[10px] font-mono bg-navy-800 text-accent-blue border border-navy-700 mb-2">
                                {currentDayData.date}
                            </span>
                            <h2 className="text-2xl font-bold text-text-light">{currentDayData.title}</h2>
                        </div>

                        <WeatherWidget weather={currentDayData.weather} />
                        <InfoAccordion />

                        {/* Timeline */}
                        <div className="relative pl-4 space-y-3 pb-20">
                            {/* Vertical Line */}
                            <div className="absolute left-[23px] top-4 bottom-4 w-0.5 bg-navy-700"></div>

                            {currentDayData.activities.map((item, idx) => (
                                <div 
                                    key={idx} 
                                    className="relative flex gap-3 group cursor-pointer"
                                    onClick={() => setModalData(item)}
                                >
                                    {/* Icon */}
                                    <div className={`relative z-10 w-10 h-10 rounded-full flex items-center justify-center border shrink-0 transition-transform group-hover:scale-110 shadow-neon ${getItemStyle(item.type)}`}>
                                        {getIcon(item.type)}
                                    </div>

                                    {/* Card */}
                                    <div className="flex-1 bg-navy-800 border border-navy-700 rounded-xl p-3 hover:border-navy-600 hover:bg-navy-700/50 transition-colors shadow-card">
                                        <div className="flex items-center gap-2 mb-1">
                                            <span className="text-xs font-mono font-bold text-accent-teal bg-navy-900 px-1.5 py-0.5 rounded">
                                                {item.time}
                                            </span>
                                        </div>
                                        <h3 className="font-bold text-text-light text-base mb-1">{item.title}</h3>
                                        <p className="text-xs text-text-main line-clamp-1">{item.desc}</p>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    <Modal isOpen={!!modalData} onClose={() => setModalData(null)} data={modalData} />
                    <ToolsDrawer isOpen={showTools} onClose={() => setShowTools(false)} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
