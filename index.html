<!DOCTYPE html>
<html lang="zh-Hant">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>🍁 京都・大阪自由行 | 5天4夜行程表</title>
   <script src="https://cdn.tailwindcss.com"></script>
   <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
   <style>
       body {
           font-family: 'Inter', sans-serif;
           background-color: #f7f3f0; /* 柔和的米白色背景 */
       }
       .app-container {
           max-width: 420px; /* 模擬手機寬度 */
           box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
           min-height: 100vh;
       }
       .tab-button.active {
           background-color: #d9e9c9; /* 柔和的綠色底 */
           color: #38761d;
           border-bottom: 3px solid #6aa84f;
           font-weight: 600;
       }
       /* 可點擊景點的樣式 */
       .spot-clickable {
           cursor: pointer;
           text-decoration: underline;
           text-decoration-color: #90d36c;
           text-underline-offset: 2px;
           transition: color 0.15s;
       }
       .spot-clickable:hover {
           color: #6aa84f;
       }
   </style>
</head>
<body class="p-4 flex justify-center">

<div class="app-container bg-white rounded-2xl overflow-hidden shadow-2xl">

   <!-- 頂部標題與總覽 -->
   <header class="p-6 bg-amber-50">
       <h1 class="text-3xl font-bold text-stone-800 mb-1">🍁 關西五日・秋日漫遊</h1>
       <p class="text-sm text-stone-500">日期：10/16 ~ 10/20 (5天4夜) | 4人家族旅行</p>
       <div class="mt-3 flex space-x-2 text-xs">
           <span class="bg-lime-500/80 text-white px-3 py-1 rounded-full font-semibold">京都 (M's Hotel)</span>
           <span class="bg-lime-500/80 text-white px-3 py-1 rounded-full font-semibold">大阪 (Bridge Hotel)</span>
       </div>
   </header>

   <!-- 航班與重要資訊區 -->
   <div class="p-4 bg-white border-b border-stone-100">
       <h2 class="text-lg font-semibold text-stone-700 mb-2">✈️ 航班資訊</h2>
       <div class="grid grid-cols-2 gap-2 text-sm">
           <div>
               <p class="font-medium text-stone-600">去程 (10/16)</p>
               <p class="text-stone-500">CI0152 TPE 09:00 → KIX 12:50</p>
           </div>
           <div>
               <p class="font-medium text-stone-600">回程 (10/20)</p>
               <p class="text-stone-500">CI0153 KIX 14:00 → TPE 15:55</p>
           </div>
       </div>
   </div>

   <!-- 每日行程 Tab 導航 -->
   <nav id="tab-navigation" class="flex justify-between sticky top-0 bg-white border-b border-stone-200 z-10">
       <!-- Tab buttons will be dynamically generated here -->
   </nav>

   <!-- 每日行程內容區 -->
   <main id="itinerary-content" class="p-4">
       <!-- Content will be dynamically loaded here -->
   </main>
   
   <!-- 景點詳情彈窗 (Modal) -->
   <div id="spot-modal" class="hidden fixed inset-0 bg-black bg-opacity-40 z-50 flex items-center justify-center p-4" onclick="closeSpotModal()">
       <div class="bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl" onclick="event.stopPropagation()">
           <h3 id="modal-title" class="text-2xl font-bold text-stone-800 mb-2"></h3>
           <p id="modal-desc" class="text-stone-600 mb-4"></p>
           <a id="modal-link" href="#" target="_blank" class="block w-full text-center py-3 rounded-xl bg-lime-500 text-white font-semibold hover:bg-lime-600 transition">
               查看地圖位置 ↗
           </a>
           <button onclick="closeSpotModal()" class="w-full mt-3 text-sm text-stone-500 py-1">關閉</button>
       </div>
   </div>

</div>

<script>
   // 景點介紹與連結的資料庫
   const SPOT_DESCRIPTIONS = {
       "嵐山渡月橋、竹林小徑": { 
           desc: "京都最具代表性的自然景觀，參天竹林營造出幽靜氛圍。位於 Kyoto。", 
           link: "https://maps.google.com/maps?q=%E5%B5%90%E5%B1%B1%E7%AB%B9%E6%9E%97%E5%B0%8F%E5%BE%91+%C2%B7+Kyoto%2C+Kyoto" 
       },
       "清水寺參觀+散步三年坂／二年坂": { 
           desc: "世界遺產，以「清水之舞台」聞名，門票¥500。包含三年坂／二年坂的散步購物。", 
           link: "https://maps.google.com/maps?q=%E6%B8%85%E6%B0%B4%E5%AF%BA+%C2%B7+Kyoto%2C+Kyoto" 
       },
       "八坂神社＆花見小路走走": { 
           desc: "京都祇園地區的守護神，是當地重要的信仰中心。花見小路可感受古都氛圍。", 
           link: "https://maps.google.com/maps?q=%E5%85%AB%E5%9D%82%E7%A5%9E%E7%A4%BE%E6%9C%AC%E6%AE%BF+%C2%B7+Kyoto%2C+Kyoto" 
       },
       "平安神宮本殿區域": { 
           desc: "或可選擇前往，參觀宏偉的神宮和巨大的鳥居。", 
           link: "https://maps.google.com/maps?q=%E5%B9%B3%E5%AE%89%E7%A5%9E%E5%AE%AE+%C2%B7+Kyoto%2C+Kyoto" 
       },
       "伏見稻荷大社參拜（千本鳥居）": { 
           desc: "以綿延山頭的「千本鳥居」聞名，是京都必訪的免費景點。", 
           link: "https://maps.google.com/maps?q=%E4%BC%8F%E8%A6%8B%E7%A8%B2%E8%8D%B7%E5%A4%A7%E7%A4%BE+%C2%B7+Kyoto%2C+Kyoto" 
       },
       "HEP FIVE 摩天輪": { 
           desc: "⚠️ ALERT: 您的行程註明此處維修。建議改為梅田藍天大廈空中庭園等替代景點。", 
           link: "" // 不提供連結，強調維修
       },
       "道頓堀＆心齋橋自由活動": { 
           desc: "大阪最熱鬧的區域之一，包含心齋橋 PARCO 和格力高招牌。", 
           link: "https://maps.google.com/maps?q=%E5%BF%83%E6%96%8E%E6%A9%85PARCO+%C2%B7+Osaka%2C+Osaka" 
       },
       "參觀大阪城＆御座船＋博物館": { 
           desc: "日本三大名城之一，是大阪歷史的象徵。包含御座船體驗及博物館參觀，建議使用大阪周遊券。", 
           link: "https://maps.google.com/maps?q=%E5%A4%A7%E9%98%AA%E5%9F%8E+%C2%B7+Osaka%2C+Osaka" 
       },
       "大阪天滿宮參拜": { 
           desc: "大阪天神祭的舉辦地，主祀學問之神，祈求學業順利。", 
           link: "https://maps.google.com/maps?q=%E5%A4%A7%E9%98%AA%E5%A4%A9%E6%BB%BF%E5%AE%AE+%C2%B7+Osaka%2C+Osaka" 
       },
       "大阪生活今昔館（穿越江戶時代街景，可體驗和服）": { 
           desc: "重現江戶時代街景，可付費體驗和服，是周遊券包含的景點。", 
           link: "https://maps.google.com/maps?q=%E5%A4%A7%E9%98%AA%E7%94%9F%E6%B4%BB%E4%BB%8A%E6%98%94%E9%A4%A8+%C2%B7+Osaka%2C+Osaka" 
       },
       "黑門市場散策，嚐鮮海鮮/和牛串/水果大福": { 
           desc: "大阪的美食廚房，提供各式新鮮海鮮和在地小吃。", 
           link: "https://maps.google.com/maps?q=%E9%BB%92%E9%96%80%E5%B8%82%E5%A0%B4+%C2%B7+Osaka%2C+Osaka" 
       },
       "參拜大鳥大社": { 
           desc: "位於大阪府堺市，告別之旅的最後一站。行程安排在返回機場前。", 
           link: "https://maps.google.com/maps?q=%E5%A4%A7%E9%B3%A5%E5%A4%A7%E7%A4%BE+%C2%B7+Sakai%2C+Osaka" 
       }
   };

   // 行程資料庫 (Data Model) - 包含所有細節
   const itineraryData = [
       {
           id: 'day1', day: 1, date: "10/16 (四)", title: "京都初印象：嵐山＋月燈路", theme: "自然・移動",
           schedule: [
               { time: "05:30", desc: "竹北 >> 桃機 2 航廈", icon: "🚗", detail: "現金 $1500" },
               { time: "09:00", desc: "桃園機場出發", icon: "✈️", detail: "中華航空 CI0152" },
               { time: "13:00", desc: "抵達關西機場", icon: "🛬", detail: "預計 12:50 抵達" },
               { time: "14:00", desc: "搭 JR Haruka 特急 → 京都車站", icon: "🚅", detail: "車程約 70-80 分鐘" },
               { time: "15:30", desc: "入住 Hotel The M’s Kyoto", icon: "🏨", detail: "辦理入住手續" },
               { time: "16:10", desc: "嵐山渡月橋、竹林小徑", icon: "🍃", detail: "免費參觀", isSpot: true },
               { time: "18:00", desc: "參加嵐山月燈路", icon: "🌙", detail: "季節性點燈活動" },
               { time: "19:30", desc: "晚餐或回飯店休息", icon: "🍽️", detail: "滾動式調整" },
           ],
       },
       {
           id: 'day2', day: 2, date: "10/17 (五)", title: "古都風情：清水寺＋八坂神社＋錦市場", theme: "文化・美食",
           schedule: [
               { time: "08:30", desc: "出發 → 市巴士至五条坂", icon: "🚌", detail: "搭乘市區巴士" },
               { time: "09:30", desc: "清水寺參觀+散步三年坂／二年坂", icon: "🏯", detail: "門票¥500", isSpot: true },
               { time: "11:40", desc: "八坂神社＆花見小路走走", icon: "⛩️", detail: "景點免費", isSpot: true },
               { time: "13:25", desc: "錦市場午餐＋逛街", icon: "🛍️", detail: "京都的廚房" },
               { time: "15:00", desc: "四条河原町自由活動 (或去平安神宮本殿區域免費)", icon: "🏙️", detail: "購物或參觀", isSpot: true, spotName: "平安神宮本殿區域" },
               { time: "18:30", desc: "壽喜燒三條河原町店", icon: "🥩", detail: "晚餐預訂" },
               { time: "傍晚", desc: "回飯店休息", icon: "🛌", detail: "" },
           ],
       },
       {
           id: 'day3', day: 3, date: "10/18 (六)", title: "伏見稻荷＋大阪摩天輪＋入住", theme: "移動・鳥居",
           schedule: [
               { time: "08:30", desc: "出發 → 伏見稻荷大社參拜（千本鳥居）", icon: "⛩️", detail: "景點免費", isSpot: true },
               { time: "11:00", desc: "午餐 → 回飯店取行李", icon: "🍴", detail: "準備退房" },
               { time: "14:20", desc: "搭 JR 新快速 → 大阪梅田", icon: "🚅", detail: "跨城市移動" },
               { time: "15:30", desc: "抵達梅田 → HEP FIVE 摩天輪", icon: "🎡", detail: "🚨 **注意：行程註明維修中**", isSpot: true },
               { time: "17:00", desc: "前往飯店 → 入住 The Bridge Hotel Shinsaibashi", icon: "🏨", detail: "心齋橋區域" },
               { time: "18:30", desc: "道頓堀＆心齋橋自由活動", icon: "🎏", detail: "夜間購物與美食", isSpot: true },
           ],
       },
       {
           id: 'day4', day: 4, date: "10/19 (日)", title: "大阪深度：大阪城＋天滿宮＋今昔館＋黑門市場", theme: "歷史・庶民",
           schedule: [
               { time: "08:30", desc: "地鐵至大阪商務園區", icon: "🚇", detail: "" },
               { time: "09:00", desc: "參觀大阪城＆御座船＋博物館", icon: "🏯", detail: "約 2.5 小時，周遊券可用", isSpot: true },
               { time: "12:00", desc: "大阪天滿宮參拜", icon: "⛩️", detail: "免費參觀", isSpot: true },
               { time: "12:30", desc: "天神橋筋商店街午餐", icon: "🍜", detail: "日本最長商店街" },
               { time: "13:30", desc: "大阪生活今昔館（穿越江戶時代街景，可體驗和服）", icon: "🏘️", detail: "周遊券可用", isSpot: true },
               { time: "15:30", desc: "黑門市場散策，嚐鮮海鮮/和牛串/水果大福", icon: "🐟", detail: "大阪美食廚房", isSpot: true },
               { time: "17:00", desc: "回心齋橋／道頓堀自由逛街", icon: "🛍️", detail: "購物時間" },
               { time: "20:00", desc: "燒肉力丸難波道頓堀店", icon: "🥩", detail: "晚餐預訂" },
           ],
       },
       {
           id: 'day5', day: 5, date: "10/20 (一)", title: "大鳥大社參拜＋返台", theme: "返程・參拜",
           schedule: [
               { time: "08:30", desc: "地鐵至天王寺 → JR至鳳站", icon: "🚇", detail: "" },
               { time: "09:20", desc: "參拜大鳥大社", icon: "⛩️", detail: "免費參觀", isSpot: true },
               { time: "10:00", desc: "JR／南海電鐵 → 關西機場", icon: "🚅", detail: "準備前往機場" },
               { time: "11:00", desc: "報到／退稅／午餐準備", icon: "✈️", detail: "機場手續" },
               { time: "14:00", desc: "搭機返台", icon: "🛬", detail: "中華航空 CI0153" },
           ],
       }
   ];

   const tabNavigation = document.getElementById('tab-navigation');
   const itineraryContent = document.getElementById('itinerary-content');
   const spotModal = document.getElementById('spot-modal');
   const modalTitle = document.getElementById('modal-title');
   const modalDesc = document.getElementById('modal-desc');
   const modalLink = document.getElementById('modal-link');

   // 1. 渲染導航 Tab 按鈕
   itineraryData.forEach(item => {
       const button = document.createElement('button');
       button.className = 'tab-button flex-1 py-3 text-sm text-stone-600 focus:outline-none transition duration-150';
       button.textContent = `Day ${item.day}`;
       button.dataset.day = item.id;
       button.onclick = () => switchTab(item.id);
       tabNavigation.appendChild(button);
   });

   // 2. 渲染單日行程內容
   function renderDayContent(dayId) {
       const data = itineraryData.find(d => d.id === dayId);
       if (!data) return;

       let contentHTML = `
           <div class="day-header mb-4 p-3 bg-stone-100 rounded-xl">
               <h2 class="text-xl font-bold text-stone-800">${data.title}</h2>
               <p class="text-sm text-stone-500 mt-1">${data.date} | 主題：${data.theme}</p>
           </div>
           <h3 class="text-lg font-semibold text-stone-700 mb-4 border-b pb-1">🕒 每日行程時間軸</h3>
           <div class="space-y-4 mb-8">
       `;

       // 行程時間表
       data.schedule.forEach(item => {
           // 判斷是否為景點，如果是則加入 spot-clickable class 和 onclick 事件
           const isSpot = item.isSpot;
           const spotKey = item.spotName || item.desc;
           
           let descContent = item.desc;
           let detailClass = 'text-stone-500';

           if (isSpot) {
               // 如果是景點，將描述包裝為可點擊元素
               descContent = `<span class="spot-clickable" onclick="showSpotModal('${spotKey}')">${item.desc}</span>`;
               if (item.detail.includes("維修中")) {
                   detailClass = 'text-red-500 font-bold'; // 特別標記維修
               }
           }
           
           contentHTML += `
               <div class="flex items-start space-x-3">
                   <div class="w-12 pt-1 flex-shrink-0">
                       <span class="text-sm font-semibold text-stone-700">${item.time}</span>
                   </div>
                   <div class="flex-shrink-0 mt-1">
                       <div class="w-6 h-6 flex items-center justify-center rounded-full bg-lime-100">${item.icon}</div>
                   </div>
                   <div class="flex-1 border-l-2 border-lime-300 pl-4 py-0.5">
                       <p class="font-medium text-stone-700">${descContent}</p>
                       <p class="text-xs ${detailClass}">${item.detail}</p>
                   </div>
               </div>
           `;
       });
       contentHTML += `</div>`;
       itineraryContent.innerHTML = contentHTML;
   }

   // 3. 顯示景點彈窗
   function showSpotModal(spotName) {
       const spotData = SPOT_DESCRIPTIONS[spotName];

       if (!spotData) {
           // 如果點擊了非景點 (例如單純的 HEP FIVE 摩天輪 維修警告)
           if (spotName.includes("HEP FIVE")) {
                modalTitle.textContent = "🚨 摩天輪維修警示";
                modalDesc.textContent = "您的行程註明 HEP FIVE 摩天輪目前維修中。建議改為梅田藍天大廈空中庭園等替代景點，以免耽誤行程。";
                modalLink.classList.add('hidden'); // 隱藏地圖連結
           } else {
                modalTitle.textContent = spotName;
                modalDesc.textContent = "此項目為行程安排，無特別景點介紹。";
                modalLink.classList.add('hidden');
           }
       } else {
           modalTitle.textContent = spotName.split('（')[0].split('+')[0].trim(); // 顯示主名稱
           modalDesc.textContent = spotData.desc;
           modalLink.href = spotData.link;
           modalLink.classList.remove('hidden');
       }
       spotModal.classList.remove('hidden');
   }

   // 4. 關閉景點彈窗
   function closeSpotModal() {
       spotModal.classList.add('hidden');
   }

   // 5. 切換 Tab 邏輯
   function switchTab(dayId) {
       document.querySelectorAll('.tab-button').forEach(btn => {
           btn.classList.remove('active');
       });
       const activeBtn = document.querySelector(`.tab-button[data-day="${dayId}"]`);
       if (activeBtn) {
           activeBtn.classList.add('active');
       }
       renderDayContent(dayId);
   }

   // 6. 應用程式啟動：預設顯示 Day 1
   document.addEventListener('DOMContentLoaded', () => {
       if (itineraryData.length > 0) {
           switchTab(itineraryData[0].id);
       }
   });

   // 為了讓 showSpotModal 在全域可用，這裡將它附在 window 上
   window.showSpotModal = showSpotModal;
   window.closeSpotModal = closeSpotModal;

</script>

</body>
</html>
