<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iPhone ç…§ç‰‡ä¸€éµèª¿è‰² (æœ€çµ‚ç©©å®šç‰ˆ)</title>
    <style>
        /* CSS æ¨£å¼ */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            background-color: #f0f0f5;
            padding: 20px;
            text-align: center;
        }

        h1 {
            color: #1c1c1e;
            margin-bottom: 20px;
        }

        #upload-container {
            margin-bottom: 20px;
            padding: 15px;
            border: 2px dashed #007aff;
            border-radius: 12px;
            background-color: #ffffff;
            cursor: pointer;
        }

        #controls-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .vibe-button {
            background-color: #007aff;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
        }

        .vibe-button:hover {
            background-color: #005bb5;
        }

        .vibe-button.active {
            background-color: #34c759;
            transform: scale(1.05);
        }

        /* åœ–ç‰‡å®¹å™¨ */
        #image-container {
            max-width: 100%;
            margin: 0 auto 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            overflow: hidden;
            min-height: 200px; /* é ç•™ç©ºé–“çµ¦è¼‰å…¥æç¤º */
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #e0e0e0;
        }
        
        /* é¡¯ç¤ºåœ–ç‰‡æ¨£å¼ */
        #display-image {
            display: none; 
            max-width: 100%; 
            height: auto; 
            border-radius: 12px; 
            margin: 0 auto;
        }

        /* è¼‰å…¥æç¤ºæ¨£å¼ */
        #loading-message {
            color: #444;
            font-size: 18px;
            font-weight: 500;
            display: none; /* é è¨­éš±è— */
            padding: 50px;
        }

        #save-button {
            background-color: #34c759;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            display: none;
            transition: background-color 0.2s;
        }

        #save-button:hover {
            background-color: #28a745;
        }

        .instruction {
            color: #8e8e93;
            margin-top: 10px;
        }
    </style>
</head>
<body>

    <h1>âœ¨ iPhone ç…§ç‰‡ä¸€éµèª¿è‰² (æœ€çµ‚ç©©å®šç‰ˆ) âœ¨</h1>
    
    <div id="upload-container">
        <label for="photo-upload">é»æ“Šæ­¤è™•é¸æ“‡ç…§ç‰‡ï¼ˆæ‰‹æ©Ÿç›¸ç°¿/æª”æ¡ˆï¼‰</label>
        <input type="file" id="photo-upload" accept="image/*" style="display: none;">
        <p class="instruction">è«‹é¸æ“‡ä¸€å¼µç…§ç‰‡å¾Œï¼Œå†é»æ“Šä¸‹æ–¹æŒ‰éˆ•é€²è¡Œèª¿è‰²</p>
    </div>

    <div id="controls-container">
        <button class="vibe-button" data-filter="filter1">1. å†·ç™½çš®æ¿¾é¡</button>
        <button class="vibe-button" data-filter="filter2">2. ç™¼å…‰å»ç°</button>
        <button class="vibe-button" data-filter="filter3">3. ç¾é£Ÿèª¿</button>
        <button class="vibe-button" data-filter="filter4">4. å¥¶æ²¹insé¢¨</button>
        <button class="vibe-button" data-filter="filter5">5. å¯Œå£«æ„Ÿæ¿¾é¡</button>
        <button class="vibe-button" data-filter="filter6">6. è½æ—¥æ°›åœæ„Ÿ</button>
        <button class="vibe-button" data-filter="filter7">7. æ—¥å¸¸è¡—æ‹æ¿¾é¡</button>
        <button class="vibe-button" data-filter="filter8">8. çµ•ç¾æ—¥è½æ¿¾é¡</button>
        <button class="vibe-button" data-filter="filter9">9. éœè¬æš—èª¿</button>
        <button class="vibe-button" data-filter="reset">ğŸ”„ é‡ç½®</button>
    </div>

    <div id="image-container">
        <img id="display-image">
        <p id="loading-message">æ­£åœ¨è™•ç†ç…§ç‰‡ï¼Œè«‹ç¨å€™...</p>
    </div>

    <button id="save-button">ğŸ“¥ å„²å­˜ç·¨è¼¯å¾Œç…§ç‰‡</button>

    <script>
        const FILTERS = {
            'filter1': { brightness: 1.15, contrast: 1.10, saturate: 1.15, sepia: 0.05, hueRotate: -5 },
            'filter2': { brightness: 1.05, contrast: 1.05, saturate: 1.15, sepia: 0.05, hueRotate: 0 },
            'filter3': { brightness: 1.10, contrast: 1.15, saturate: 1.20, sepia: 0.05, hueRotate: 0 },
            'filter4': { brightness: 1.10, contrast: 0.90, saturate: 0.85, sepia: 0.15, hueRotate: 0 },
            'filter5': { brightness: 0.90, contrast: 1.05, saturate: 1.10, sepia: 0.25, hueRotate: 0 },
            'filter6': { brightness: 1.15, contrast: 1.10, saturate: 1.25, sepia: 0.30, hueRotate: -5 },
            'filter7': { brightness: 1.05, contrast: 1.20, saturate: 1.40, sepia: 0.00, hueRotate: 0 },
            'filter8': { brightness: 1.10, contrast: 1.20, saturate: 1.50, sepia: 0.40, hueRotate: 10 },
            'filter9': { brightness: 0.85, contrast: 1.20, saturate: 0.90, sepia: 0.00, hueRotate: 0 },
        };
        
        const fileInput = document.getElementById('photo-upload');
        const displayImage = document.getElementById('display-image');
        const saveButton = document.getElementById('save-button');
        const controlsContainer = document.getElementById('controls-container');
        const loadingMessage = document.getElementById('loading-message'); // æ–°å¢
        let originalImage = null;

        /**
         * è®€å–ç”¨æˆ¶é¸æ“‡çš„åœ–ç‰‡ä¸¦é¡¯ç¤º
         */
        fileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (!file) return;

            // æ­¥é©Ÿ 1: éš±è—èˆŠåœ–ç‰‡ï¼Œé¡¯ç¤ºè¼‰å…¥æç¤º
            displayImage.style.display = 'none';
            saveButton.style.display = 'none';
            loadingMessage.style.display = 'block'; 

            const reader = new FileReader();
            reader.onload = function(event) {
                originalImage = new Image();
                originalImage.onload = function() {
                    // æ­¥é©Ÿ 2: åœ–ç‰‡è¼‰å…¥å®Œæˆï¼Œéš±è—è¼‰å…¥æç¤ºï¼Œé¡¯ç¤ºåœ–ç‰‡
                    loadingMessage.style.display = 'none';
                    displayImage.src = originalImage.src;
                    displayImage.style.display = 'block';
                    saveButton.style.display = 'block';
                    
                    applyCssFilter('reset');
                    setActiveButton(null); 
                };
                originalImage.crossOrigin = "Anonymous"; 
                originalImage.src = event.target.result;
            };
            reader.readAsDataURL(file);
        });

        function applyCssFilter(filterKey) {
            if (!originalImage) return;

            let filterStyle = '';
            if (filterKey !== 'reset' && FILTERS[filterKey]) {
                const f = FILTERS[filterKey];
                filterStyle = `
                    brightness(${f.brightness}) 
                    contrast(${f.contrast}) 
                    saturate(${f.saturate}) 
                    hue-rotate(${f.hueRotate}deg) 
                    sepia(${f.sepia})
                `.replace(/\s+/g, ' ').trim(); 
            }
            
            displayImage.style.filter = filterStyle;
        }

        function setActiveButton(activeButton) {
            document.querySelectorAll('.vibe-button').forEach(btn => {
                btn.classList.remove('active');
            });
            if (activeButton) {
                activeButton.classList.add('active');
            }
        }

        controlsContainer.addEventListener('click', (e) => {
            const button = e.target.closest('.vibe-button');
            if (button) {
                const filter = button.dataset.filter;
                applyCssFilter(filter);
                setActiveButton(button.dataset.filter === 'reset' ? null : button);
            }
        });

        /**
         * å„²å­˜åœ–ç‰‡åŠŸèƒ½ (å¼•å°ç”¨æˆ¶é•·æŒ‰å„²å­˜)
         */
        saveButton.addEventListener('click', () => {
            if (!originalImage) {
                alert('æ²’æœ‰å¯å„²å­˜çš„ç…§ç‰‡ï¼');
                return;
            }
            
            alert('æŠ±æ­‰ï¼Œç´”ç¶²é ç’°å¢ƒç„¡æ³•å°‡ CSS æ¿¾é¡æ•ˆæœå®Œå…¨å›ºåŒ–åˆ°ä¸‹è¼‰çš„åœ–ç‰‡ä¸­ã€‚\n\n**è«‹æ”¹ç”¨ä»¥ä¸‹æ–¹å¼å„²å­˜ç·¨è¼¯å¾Œçš„ç…§ç‰‡ï¼š**\n\n1. é•·æŒ‰ç·¨è¼¯å¾Œçš„ç…§ç‰‡ã€‚\n2. åœ¨å½ˆå‡ºçš„é¸å–®ä¸­é¸æ“‡ã€Œå„²å­˜åœ–ç‰‡ã€ã€‚');
        });

        // åˆå§‹åŒ–ï¼šé»æ“Šä¸Šå‚³å€åŸŸè§¸ç™¼æª”æ¡ˆé¸æ“‡
        document.getElementById('upload-container').addEventListener('click', () => {
            fileInput.click();
        });
        
    </script>
</body>
</html>
