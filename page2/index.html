<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>日文五十音測驗</title>
  <style>
    body {
      font-family: "Microsoft JhengHei", Arial, sans-serif;
      background: linear-gradient(135deg, #fceabb, #f8b500);
      text-align: center;
      margin: 0;
      padding: 0;
    }
    h1 {
      font-size: 48px;
      margin: 30px 0;
      color: #333;
      text-shadow: 2px 2px 4px #fff;
    }
    h2 {
      font-size: 28px;
      margin-bottom: 20px;
      color: #444;
    }
    button {
      margin: 10px;
      padding: 15px 30px;
      font-size: 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background: #ff9800;
      color: #fff;
      transition: transform 0.2s, background 0.3s;
    }
    button:hover {
      background: #e68900;
      transform: scale(1.1);
    }
    #question {
      font-size: 60px;
      margin: 30px;
      color: #222;
    }
    #timer {
      font-size: 28px;
      color: #d32f2f;
      margin-bottom: 20px;
    }
    #options button {
      display: inline-block;
      margin: 10px;
      padding: 15px 25px;
      font-size: 24px;
      background: #4caf50;
    }
    #options button:hover {
      background: #388e3c;
    }
    #wrong {
      margin-top: 30px;
      background: rgba(255,255,255,0.8);
      padding: 15px;
      border-radius: 10px;
      width: 80%;
      margin-left: auto;
      margin-right: auto;
    }
    #wrong h3 {
      font-size: 24px;
      margin-bottom: 10px;
    }
    #wrongList {
      font-size: 20px;
      text-align: left;
    }
    #quizArea {
      display: none;
    }
  </style>
</head>
<body>
  <h1>日文五十音測驗</h1>

  <!-- 首頁選單 -->
  <div id="home">
    <h2>請選擇測驗模式</h2>
    <button onclick="startQuiz(1)">平假名測驗</button>
    <button onclick="startQuiz(2)">片假名測驗</button>
    <button onclick="startQuiz(3)">互選測驗</button>
  </div>

  <!-- 測驗區 -->
  <div id="quizArea">
    <div id="question"></div>
    <div id="timer"></div>
    <div id="options"></div>
    <div id="wrong">
      <h3>錯誤紀錄</h3>
      <ul id="wrongList"></ul>
    </div>
    <button onclick="goHome()">返回首頁</button>
  </div>

<script>
/* --- 五十音資料集 --- */
const hiragana = [
  { char: "あ", romaji: "a", katakana: "ア" },
  { char: "い", romaji: "i", katakana: "イ" },
  { char: "う", romaji: "u", katakana: "ウ" },
  { char: "え", romaji: "e", katakana: "エ" },
  { char: "お", romaji: "o", katakana: "オ" },
  { char: "か", romaji: "ka", katakana: "カ" },
  { char: "き", romaji: "ki", katakana: "キ" },
  { char: "く", romaji: "ku", katakana: "ク" },
  { char: "け", romaji: "ke", katakana: "ケ" },
  { char: "こ", romaji: "ko", katakana: "コ" },
  { char: "さ", romaji: "sa", katakana: "サ" },
  { char: "し", romaji: "shi", katakana: "シ" },
  { char: "す", romaji: "su", katakana: "ス" },
  { char: "せ", romaji: "se", katakana: "セ" },
  { char: "そ", romaji: "so", katakana: "ソ" },
  { char: "た", romaji: "ta", katakana: "タ" },
  { char: "ち", romaji: "chi", katakana: "チ" },
  { char: "つ", romaji: "tsu", katakana: "ツ" },
  { char: "て", romaji: "te", katakana: "テ" },
  { char: "と", romaji: "to", katakana: "ト" },
  { char: "な", romaji: "na", katakana: "ナ" },
  { char: "に", romaji: "ni", katakana: "ニ" },
  { char: "ぬ", romaji: "nu", katakana: "ヌ" },
  { char: "ね", romaji: "ne", katakana: "ネ" },
  { char: "の", romaji: "no", katakana: "ノ" },
  { char: "は", romaji: "ha", katakana: "ハ" },
  { char: "ひ", romaji: "hi", katakana: "ヒ" },
  { char: "ふ", romaji: "fu", katakana: "フ" },
  { char: "へ", romaji: "he", katakana: "ヘ" },
  { char: "ほ", romaji: "ho", katakana: "ホ" },
  { char: "ま", romaji: "ma", katakana: "マ" },
  { char: "み", romaji: "mi", katakana: "ミ" },
  { char: "む", romaji: "mu", katakana: "ム" },
  { char: "め", romaji: "me", katakana: "メ" },
  { char: "も", romaji: "mo", katakana: "モ" },
  { char: "や", romaji: "ya", katakana: "ヤ" },
  { char: "ゆ", romaji: "yu", katakana: "ユ" },
  { char: "よ", romaji: "yo", katakana: "ヨ" },
  { char: "ら", romaji: "ra", katakana: "ラ" },
  { char: "り", romaji: "ri", katakana: "リ" },
  { char: "る", romaji: "ru", katakana: "ル" },
  { char: "れ", romaji: "re", katakana: "レ" },
  { char: "ろ", romaji: "ro", katakana: "ロ" },
  { char: "わ", romaji: "wa", katakana: "ワ" },
  { char: "を", romaji: "wo", katakana: "ヲ" },
  { char: "ん", romaji: "n", katakana: "ン" }
];

let mode = 1;
let question = null;
let options = [];
let timer = 8;
let wrongAnswers = [];
let countdown;

function startQuiz(m) {
  mode = m;
  wrongAnswers = [];
  document.getElementById("wrongList").innerHTML = "";
  document.getElementById("home").style.display = "none";
  document.getElementById("quizArea").style.display = "block";
  generateQuestion();
}

function goHome() {
  clearInterval(countdown);
  document.getElementById("quizArea").style.display = "none";
  document.getElementById("home").style.display = "block";
}

function shuffle(arr) {
  return arr.sort(() => Math.random() - 0.5);
}
function randomRomaji(n) {
  return shuffle(hiragana.map(h => h.romaji)).slice(0, n);
}
function randomKatakana(n) {
  return shuffle(hiragana.map(h => h.katakana)).slice(0, n);
}

function generateQuestion() {
  clearTimeout(countdown);
  const q = hiragana[Math.floor(Math.random() * hiragana.length)];
  if (mode === 1) {
    options = shuffle([q.romaji, ...randomRomaji(3)]);
    question = { value: q.char, answer: q.romaji };
  } else if (mode === 2) {
    options = shuffle([q.romaji, ...randomRomaji(3)]);
    question =
