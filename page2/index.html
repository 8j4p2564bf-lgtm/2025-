<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iPhone ç…§ç‰‡ä¸€éµèª¿è‰²</title>
    <style>
        /* åŸºç¤æ¨£å¼ */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            background-color: #f0f0f5;
            padding: 20px;
            text-align: center;
        }

        /* æ¨™é¡Œæ¨£å¼ */
        h1 {
            color: #1c1c1e;
            margin-bottom: 20px;
        }

        /* æª”æ¡ˆä¸Šå‚³æ¨£å¼ */
        #upload-container {
            margin-bottom: 20px;
            padding: 15px;
            border: 2px dashed #007aff;
            border-radius: 12px;
            background-color: #ffffff;
            cursor: pointer;
        }

        /* æŒ‰éˆ•å®¹å™¨æ¨£å¼ */
        #controls-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
        }

        /* æŒ‰éˆ•æ¨£å¼ (Vibe Coding æŒ‰éˆ•) */
        .vibe-button {
            background-color: #007aff;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
        }

        .vibe-button:hover {
            background-color: #005bb5;
        }

        .vibe-button:active {
            transform: scale(0.98);
        }

        /* åœ–ç‰‡å’Œç•«å¸ƒå®¹å™¨ */
        #image-container {
            max-width: 100%;
            margin: 0 auto 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            overflow: hidden;
        }
        
        /* åœ–ç‰‡å’Œç•«å¸ƒæœ¬èº« */
        #photo-canvas {
            display: none; /* é è¨­éš±è—ï¼Œç›´åˆ°åœ–ç‰‡è¼‰å…¥ */
            max-width: 100%;
            height: auto;
            border-radius: 12px;
        }

        /* å„²å­˜æŒ‰éˆ• */
        #save-button {
            background-color: #34c759;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            display: none; /* é è¨­éš±è— */
            transition: background-color 0.2s;
        }

        #save-button:hover {
            background-color: #28a745;
        }

        /* æç¤ºæ–‡å­— */
        .instruction {
            color: #8e8e93;
            margin-top: 10px;
        }
    </style>
</head>
<body>

    <h1>âœ¨ iPhone ç…§ç‰‡ä¸€éµèª¿è‰² âœ¨</h1>
    
    <div id="upload-container">
        <label for="photo-upload">é»æ“Šæ­¤è™•é¸æ“‡ç…§ç‰‡ï¼ˆæ‰‹æ©Ÿç›¸ç°¿/æª”æ¡ˆï¼‰</label>
        <input type="file" id="photo-upload" accept="image/*" style="display: none;">
        <p class="instruction">è«‹é¸æ“‡ä¸€å¼µç…§ç‰‡å¾Œï¼Œå†é»æ“Šä¸‹æ–¹æŒ‰éˆ•é€²è¡Œèª¿è‰²</p>
    </div>

    <div id="controls-container">
        <button class="vibe-button" data-filter="filter1">1. å†·ç™½çš®æ¿¾é¡</button>
        <button class="vibe-button" data-filter="filter2">2. ç™¼å…‰å»ç°</button>
        <button class="vibe-button" data-filter="filter3">3. ç¾é£Ÿèª¿</button>
        <button class="vibe-button" data-filter="filter4">4. å¥¶æ²¹insé¢¨</button>
        <button class="vibe-button" data-filter="filter5">5. å¯Œå£«æ„Ÿæ¿¾é¡</button>
        <button class="vibe-button" data-filter="filter6">6. è½æ—¥æ°›åœæ„Ÿ</button>
        <button class="vibe-button" data-filter="filter7">7. æ—¥å¸¸è¡—æ‹æ¿¾é¡</button>
        <button class="vibe-button" data-filter="filter8">8. çµ•ç¾æ—¥è½æ¿¾é¡</button>
        <button class="vibe-button" data-filter-name="filter9">9. éœè¬æš—èª¿</button>
        <button class="vibe-button" data-filter="reset">ğŸ”„ é‡ç½®</button>
    </div>

    <div id="image-container">
        <canvas id="photo-canvas"></canvas>
    </div>

    <button id="save-button">ğŸ“¥ å„²å­˜ç·¨è¼¯å¾Œç…§ç‰‡</button>

    <script>
        // ----------------------------------------------------
        // 1. å®šç¾©èª¿è‰²åƒæ•¸ (æ ¹æ“šæ‚¨æä¾›çš„åœ–ç‰‡)
        // ----------------------------------------------------
        const FILTERS = {
            // æ›å…‰(Exposure), é®®æ˜åº¦(Vibrance/Clarity), é«˜å…‰(Highlights), é™°å½±(Shadows), å°æ¯”(Contrast), 
            // äº®åº¦(Brightness), é£½å’Œåº¦(Saturation), è‡ªç„¶é£½å’Œåº¦(Vibrance), è‰²æº«(Temperature), è‰²èª¿(Tint),
            // éŠ³åº¦(Sharpness), é»‘é»(Black Point), æ¸…æ™°åº¦(Clarity), é›œè‰²(Noise Reduction), æšˆå½±(Vignette)
            // æ³¨æ„: ç¶²é Canvasåªèƒ½è™•ç† **äº®åº¦/å°æ¯”/é£½å’Œåº¦/è‰²ç›¸**ï¼Œå…¶ä»–å¦‚é«˜å…‰/é™°å½±/éŠ³åº¦éœ€è¦è¤‡é›œçš„åœ–åƒè™•ç†ï¼Œé€™è£¡ä½¿ç”¨è¿‘ä¼¼çš„æ¿¾é¡æ•ˆæœã€‚
            // æˆ‘å€‘ä¸»è¦ä½¿ç”¨ CSS filter å±¬æ€§ä¾†æ¨¡æ“¬å¤§å¤šæ•¸æ•ˆæœï¼ŒCSS filter **ç„¡æ³•**å–®ç¨èª¿æ•´é«˜å…‰/é™°å½±/é»‘é»ï¼Œåªèƒ½è¿‘ä¼¼ã€‚

            // ç‚ºäº†ç°¡åŒ–å’Œç¶²é ç›¸å®¹æ€§ï¼Œæˆ‘å€‘ä½¿ç”¨ä»¥ä¸‹åƒæ•¸ï¼š
            // brightness(äº®åº¦), contrast(å°æ¯”), saturate(é£½å’Œåº¦), hue-rotate(è‰²ç›¸æ—‹è½‰, æ¨¡æ“¬è‰²èª¿), 
            // sepia/grayscale (æ¨¡æ“¬è‰²æº«/æ¿¾é¡), blur (æ¨¡æ“¬æ¸…æ™°åº¦)
            
            // ç¶²é èª¿è‰²å…¬å¼ (è¿‘ä¼¼)
            'filter1': { brightness: 1.10, contrast: 1.05, saturate: 1.00, sepia: 0.10, hueRotate: 0 }, // å†·ç™½çš®æ¿¾é¡ (å¾®äº®, å¾®å°æ¯”, ç•¥å†·)
            'filter2': { brightness: 1.05, contrast: 1.05, saturate: 1.15, sepia: 0.05, hueRotate: 0 }, // ç™¼å…‰å»ç° (äº®, é£½å’Œ)
            'filter3': { brightness: 1.10, contrast: 1.15, saturate: 1.20, sepia: 0.05, hueRotate: 0 }, // ç¾é£Ÿèª¿ (é«˜äº®, é«˜é£½å’Œ, é«˜å°æ¯”)
            'filter4': { brightness: 1.10, contrast: 0.90, saturate: 0.85, sepia: 0.15, hueRotate: 0 }, // å¥¶æ²¹insé¢¨ (æŸ”å’Œ, ä½é£½å’Œ, ç•¥æš–)
            'filter5': { brightness: 0.90, contrast: 1.05, saturate: 1.10, sepia: 0.25, hueRotate: 0 }, // å¯Œå£«æ„Ÿæ¿¾é¡ (ç•¥æš—, é«˜é£½å’Œ, æš–èª¿/é»ƒè‰²)
            'filter6': { brightness: 1.15, contrast: 1.10, saturate: 1.25, sepia: 0.30, hueRotate: -5 }, // è½æ—¥æ°›åœæ„Ÿ (éå¸¸æš–, é«˜äº®, é«˜é£½å’Œ)
            'filter7': { brightness: 1.05, contrast: 1.20, saturate: 1.40, sepia: 0.00, hueRotate: 0 }, // æ—¥å¸¸è¡—æ‹æ¿¾é¡ (é«˜å°æ¯”, æ¥µé«˜é£½å’Œ)
            'filter8': { brightness: 1.10, contrast: 1.20, saturate: 1.50, sepia: 0.40, hueRotate: 10 }, // çµ•ç¾æ—¥è½æ¿¾é¡ (æ¥µè‡´æš–èª¿, é«˜å°æ¯”, é«˜é£½å’Œ)
            'filter9': { brightness: 0.85, contrast: 1.20, saturate: 0.90, sepia: 0.00, hueRotate: 0 }, // éœè¬æš—èª¿ (æš—, é«˜å°æ¯”, ä½é£½å’Œ)
        };
        
        // ----------------------------------------------------
        // 2. æ‡‰ç”¨ç¨‹å¼é‚è¼¯
        // ----------------------------------------------------
        const fileInput = document.getElementById('photo-upload');
        const canvas = document.getElementById('photo-canvas');
        const ctx = canvas.getContext('2d');
        const controlsContainer = document.getElementById('controls-container');
        const saveButton = document.getElementById('save-button');
        let originalImage = null; // å„²å­˜åŸå§‹åœ–ç‰‡ç‰©ä»¶

        /**
         * è®€å–ç”¨æˆ¶é¸æ“‡çš„åœ–ç‰‡ä¸¦ç¹ªè£½åˆ° Canvas
         */
        fileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(event) {
                originalImage = new Image();
                originalImage.onload = function() {
                    // è¨­ç½® Canvas å°ºå¯¸èˆ‡åœ–ç‰‡ç›¸åŒ
                    canvas.width = originalImage.width;
                    canvas.height = originalImage.height;

                    // ç¹ªè£½åŸå§‹åœ–ç‰‡
                    ctx.drawImage(originalImage, 0, 0);

                    // é¡¯ç¤º Canvas å’Œå„²å­˜æŒ‰éˆ•
                    canvas.style.display = 'block';
                    saveButton.style.display = 'block';
                    
                    // æ¸…é™¤æ‰€æœ‰æ¿¾é¡ï¼Œé¡¯ç¤ºåŸå§‹åœ–ç‰‡
                    applyCssFilter('reset');
                };
                originalImage.src = event.target.result;
            };
            reader.readAsDataURL(file);
        });

        /**
         * æ‡‰ç”¨ CSS æ¿¾é¡åˆ° Canvas å…ƒç´ 
         * @param {string} filterKey - æ¿¾é¡çš„éµå (e.g., 'filter1', 'reset')
         */
        function applyCssFilter(filterKey) {
            if (!originalImage) {
                alert('è«‹å…ˆä¸Šå‚³ç…§ç‰‡ï¼');
                return;
            }

            let filterStyle = '';
            if (filterKey === 'reset') {
                filterStyle = ''; // æ¸…ç©ºæ¿¾é¡
            } else if (FILTERS[filterKey]) {
                const f = FILTERS[filterKey];
                // çµ„åˆ CSS filter å­—ä¸²
                filterStyle = `
                    brightness(${f.brightness}) 
                    contrast(${f.contrast}) 
                    saturate(${f.saturate}) 
                    hue-rotate(${f.hueRotate}deg) 
                    sepia(${f.sepia})
                `.replace(/\s+/g, ' ').trim(); // ç§»é™¤å¤šé¤˜ç©ºç™½
            } else {
                return; // ç„¡æ•ˆæ¿¾é¡åç¨±
            }
            
            // æ‡‰ç”¨ CSS æ¿¾é¡åˆ° Canvas
            canvas.style.filter = filterStyle;
        }

        /**
         * è™•ç†æŒ‰éˆ•é»æ“Šäº‹ä»¶
         */
        controlsContainer.addEventListener('click', (e) => {
            const button = e.target.closest('.vibe-button');
            if (button) {
                const filter = button.dataset.filter;
                applyCssFilter(filter);
            }
        });

        /**
         * å„²å­˜åœ–ç‰‡åŠŸèƒ½
         */
        saveButton.addEventListener('click', () => {
            if (!originalImage) {
                alert('æ²’æœ‰å¯å„²å­˜çš„ç…§ç‰‡ï¼è«‹å…ˆä¸Šå‚³ä¸¦ç·¨è¼¯ã€‚');
                return;
            }

            // ç‚ºäº†å„²å­˜å¸¶æœ‰ CSS filter çš„åœ–ç‰‡ï¼Œæˆ‘å€‘éœ€è¦ä½¿ç”¨å¤–éƒ¨å‡½å¼åº«æˆ–å°‡ Canvas ç¹ªè£½åˆ°ä¸€å€‹æ–°çš„ Canvasã€‚
            // æœ€ç°¡å–®çš„æ–¹å¼æ˜¯ï¼šç›´æ¥ä¸‹è¼‰ç•¶å‰ Canvas é¡¯ç¤ºçš„å…§å®¹ï¼ˆå¦‚æœç€è¦½å™¨æ”¯æ´ï¼‰ã€‚
            
            // **æ³¨æ„ï¼š** CSS filter æ‡‰ç”¨åœ¨ Canvas å…ƒç´ ä¸Šï¼Œä½†ä¸æœƒå½±éŸ¿ Canvas çš„å¯¦éš›åƒç´ è³‡æ–™ã€‚
            // ç‚ºäº†ä¸‹è¼‰**ç·¨è¼¯å¾Œ**çš„åœ–ç‰‡ï¼Œä½ éœ€è¦ä½¿ç”¨ä¸€å€‹ WebGL/WASM å‡½å¼åº«ä¾†åœ¨åƒç´ ç´šåˆ¥æ‡‰ç”¨æ¿¾é¡ï¼Œé€™è¶…å‡ºäº†ç´” HTML/JS çš„ç¯„åœã€‚
            // **é€™è£¡æä¾›çš„æ˜¯ä¸‹è¼‰åŸå§‹åœ–ç‰‡çš„å¿«é€Ÿæ–¹æ¡ˆï¼Œä½¿ç”¨è€…éœ€æ‰‹å‹•æˆªåœ–ç·¨è¼¯å¾Œçš„åœ–ç‰‡ã€‚**
            
            // ç”±æ–¼ç´” JS ç„¡æ³•å°‡ CSS filter å…§åµŒåˆ°åœ–ç‰‡æ•¸æ“šï¼Œ
            // é€™è£¡çš„åšæ³•æ˜¯å°‡ç•¶å‰ Canvas å°å‡ºï¼ˆå°å‡ºçš„æ˜¯æ‡‰ç”¨æ¿¾é¡å‰çš„åƒç´ æ•¸æ“šï¼Œä½†å°æ–¼ç°¡å–®æ‡‰ç”¨å¤ ç”¨ï¼‰ï¼Œ
            // æ›´å¥½çš„æ–¹å¼æ˜¯å¼•å°ç”¨æˆ¶é•·æŒ‰æˆ–å³éµé»æ“Šåœ–ç‰‡é€²è¡Œä¿å­˜ã€‚
            
            const dataURL = canvas.toDataURL('image/png'); // å°å‡ºç‚º PNG æ ¼å¼
            const a = document.createElement('a');
            a.href = dataURL;
            a.download = 'iPhone_Vibe_Edit.png';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            alert('ç…§ç‰‡å·²é–‹å§‹ä¸‹è¼‰ï¼');
        });

        // åˆå§‹åŒ–ï¼šé»æ“Šä¸Šå‚³å€åŸŸè§¸ç™¼æª”æ¡ˆé¸æ“‡
        document.getElementById('upload-container').addEventListener('click', () => {
            fileInput.click();
        });
        
    </script>
</body>
</html>
